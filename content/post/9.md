---
date: "2021-08-01T13:05:05-05:00"
tags:
- æ¨æ–­ç»Ÿè®¡
title: ç¬¬ä¹èŠ‚ æŠ½æ ·åˆ†å¸ƒã€åŒºé—´ä¼°è®¡ä¸æ€»ä½“å‡å€¼æ£€éªŒ
---


#### 0.é¢„å¤„ç†
* è®¾ç½®å·¥ä½œç›®å½•ï¼ˆworking directoryï¼‰
```
cd "F:/SPSS".
```
* å¯¼å…¥2016å¹´ä¸­å›½åŠ³åŠ¨åŠ›åŠ¨æ€è°ƒæŸ¥æ•°æ®
```
get file "clds2016_i.sav".
dataset names clds window = front.
dataset activate clds.
```


#### 1.è®¡ç®—æ€»ä½“ã€æ ·æœ¬åŠæŠ½æ ·åˆ†å¸ƒçš„å–å€¼
#### æ¡ˆä¾‹ï¼ˆ1-1ï¼‰ï¼šä»¥2015å¹´ä¸»èŒæ€»æ”¶å…¥ä¸ºæ€»ä½“ï¼Œè®¡ç®—æ€»ä½“ã€æ ·æœ¬åŠæŠ½æ ·åˆ†å¸ƒå–å€¼
* ä»åŸå§‹æ•°æ®ä¸­æŠ½å–è§„æ¨¡ä¸º500çš„æ ·æœ¬
* åˆ†åˆ«è®¡ç®—æ€»ä½“ã€æ ·æœ¬å’ŒæŠ½æ ·åˆ†å¸ƒçš„å‡å€¼ã€æ–¹å·®å’Œæ ‡å‡†å·®
* è®¡ç®—æ€»ä½“å‡å€¼ã€æ–¹å·®å’Œæ ‡å‡†å·®
```
select if (I3a_6  >= 0).
compute income = I3a_6.
aggregate 
	/pop_mean = mean(income).
compute diff_sq = (income - pop_mean)**2.
aggregate 
	/pop_var = mean(diff_sq).
compute pop_sd = sqrt(pop_var).
formats pop_mean pop_var pop_sd (f20.16).
descriptives pop_mean pop_var pop_sd
	/statistics mean.
```
* è®¡ç®—æ ·æœ¬å‡å€¼ã€æ–¹å·®å’Œæ ‡å‡†å·®.
```
sample 500 from 1462.
aggregate 
	/sam_mean = mean(income).
compute sam_diff_sq = (income - sam_mean)**2.  
aggregate 
	/sam_var = mean(sam_diff_sq).
compute sam_sd = sqrt(sam_var).
formats sam_mean sam_var sam_sd (f20.16).
descriptives sam_mean sam_var sam_sd
	/statistics mean.
```
* è®¡ç®—æŠ½æ ·åˆ†å¸ƒçš„å‡å€¼ã€æ–¹å·®å’Œæ ‡å‡†å·®
* è‹¥æ€»ä½“å·²çŸ¥
```
compute sampling_mean_pop = pop_mean.
compute sampling_var_pop = pop_var/500.
compute sampling_sd_pop = sqrt(sampling_var_pop).
formats sampling_var_pop sampling_sd_pop (f20.16).
descriptives sampling_mean_pop sampling_var_pop sampling_sd_pop
	/statistics mean.
```
* è‹¥æ€»ä½“æœªçŸ¥
* ç¬¬ä¸€ç§æ–¹æ³•ï¼šæ ¹æ®ç»Ÿè®¡å…¬å¼ç›´æ¥è¿›è¡Œè®¡ç®—
* æ³¨æ„ï¼šè¿›è¡Œè´å¡å°”çŸ«æ­£çš„æ ·æœ¬æ–¹å·®æ‰æ˜¯æ€»ä½“æ–¹å·®çš„æ— åä¼°è®¡
```
compute sampling_mean_sam1 = sam_mean.
aggregate 
	/sam_diff_sum = sum(sam_diff_sq). 
compute sam_var_corr = sam_diff_sum/(500-1).
compute sam_sd_corr = sqrt(sam_var_corr).
compute sampling_var_sam1 = sam_var_corr/500.
compute sampling_sd_sam1 = sqrt(sampling_var_sam1).
formats sampling_var_sam1 sampling_sd_sam1 (f20.16).
descriptives sampling_mean_sam1 sampling_var_sam1 sampling_sd_sam1
	/statistics mean.
```
* ç¬¬äºŒç§æ–¹æ³•ï¼šåˆ©ç”¨SPSSè‡ªå¸¦å‘½ä»¤ä¸è¾“å‡ºç®¡ç†åŠŸèƒ½è¿›è¡Œè®¡ç®—
* æ³¨æ„ï¼š
	* ç”¨è¯­æ³•descriptivesè®¡ç®—ï¼Œè¾“å‡ºç»“æœå·²è¿›è¡Œè´å¡å°”çŸ«æ­£
	* ç”¨è¾“å‡ºç®¡ç†ç³»ç»Ÿï¼ˆOutput Management Systemï¼ŒOMSï¼‰å°†è¾“å‡ºç»“æœè½¬ä¸ºæ•°æ®
		* è¾“å‡ºç®¡ç†ç³»ç»Ÿæ˜¯SPSSçš„è¿›é˜¶æ•°æ®ç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥ç³»ç»Ÿç®¡ç†æ‰€æœ‰æ•°æ®è¾“å‡ºç»“æœ
		* ä½¿ç”¨è¾“å‡ºç®¡ç†ç³»ç»Ÿæ—¶ï¼Œå»ºè®®å°†SPSSè¾“å‡ºç•Œé¢è®¾ç½®ä¸ºè‹±è¯­ï¼Œä»¥ä½¿ç”Ÿæˆæ•°æ®çš„å˜é‡åä¸ºè‹±è¯­ï¼Œè®¾ç½®æ–¹å¼ä¸ºï¼šç¼–è¾‘ -> é€‰é¡¹ -> è¯­è¨€ -> è¾“å‡ºæ é€‰â€œè‹±è¯­â€ï¼›
		* åŸºæœ¬è¯­æ³•ç»“æ„åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸€ä¸ºâ€œomsâ€¦â€¦omsend.â€ï¼Œå…¶äºŒä¸ºâ€œå…¶ä»–ç»Ÿè®¡è¯­æ³•â€ï¼Œåè€…åµŒå¥—åœ¨å‰è€…å†…ï¼Œå…·ä½“ç»“æ„ä¸º
```
oms 
/select é€‰æ‹©è¾“å‡ºå†…å®¹ï¼ˆchartså›¾ã€headingsæ ‡é¢˜ã€logsæ—¥å¿—ã€modelsæ¨¡å‹ã€tablesè¡¨ã€textsæ–‡æœ¬ã€treesæ”¯çº¿ã€warningsè­¦å‘Šæˆ– all expectå…¨éƒ¨é™¤äº†= [list]ï¼‰
/if commands = ["æ¶µç›–çš„è¯­æ³•ï¼ˆè¯­æ³•1ã€è¯­æ³•2â€¦â€¦ï¼‰"]
    subtypes = ["å…·ä½“è¾“å‡ºçš„å­å†…å®¹"â€¦â€¦]
/destination format = è¾“å‡ºæ–‡ä»¶æ ¼å¼ï¼ˆhtmlã€pdfã€textã€savã€spvã€xlsã€xlsxâ€¦â€¦ï¼‰ outfile = è¾“å‡ºæ–‡ä»¶å. ï¼ˆæ³¨æ„ï¼šæ­¤å¤„æœ‰ä¼‘æ­¢ç¬¦â€œ.â€ï¼‰
è¯­æ³•1 â€¦â€¦
è¯­æ³•2 â€¦â€¦
omsend.
```
* å°†è¯­æ³•descriptivesè®¡ç®—incomeçš„ç»“æœå­˜å‚¨ä¸ºæ•°æ®
```
oms 
	/select tables
	/if commands = ["descriptives"] subtypes = ["descriptive statistics"]
	/destination format = sav outfile = "sample_descriptives.sav".
descriptives variables = income 
	/statistics=mean stddev variance min max semean.
omsend.
```
* è¯»å–æ–°æ•°æ®ï¼Œè¯»å–æ—¶ä»…ä¿ç•™ç»Ÿè®¡é‡
```
get file "sample_descriptives.sav"
	/keep = N_Statistic to Variance_Statistic.
dataset names clds window = front.
dataset activate clds.
```
* æŸ¥çœ‹æ–°æ•°æ®æ‰€æœ‰å˜é‡çš„åŸºæœ¬ä¿¡æ¯
```
display dictionary.
```
* å¯¹æ–°æ•°æ®çš„æ‰€æœ‰å˜é‡é‡æ–°å‘½å
```
rename variables (all = n min max mean mean_se sd var).
```
* åˆ©ç”¨ç­›é€‰åŠŸèƒ½ï¼Œä¿ç•™ç¬¬ä¸€è¡Œ
```
compute case_num = $casenum.
select if (case_num = 1).
```
* åˆ›å»ºæŠ½æ ·åˆ†å¸ƒçš„å‡å€¼ã€æ–¹å·®å’Œæ ‡å‡†å·®
```
compute sampling_mean_sam2 = mean.
compute sampling_sd_sam2 = mean_se.
compute sampling_var_sam2 = sampling_sd_sam2**2.
formats sampling_var_sam1 sampling_sd_sam1 (f20.16).
descriptives sampling_mean_sam2 sampling_var_sam2 sampling_sd_sam2
	/statistics mean.
```
* éšå ‚ç»ƒä¹ ï¼šä»¥ç”Ÿæ´»å¹¸ç¦æ„Ÿï¼ˆI7_6_1ï¼‰ä½œä¸ºæ€»ä½“ï¼ŒéšæœºæŠ½å–400ä¸ªæ ·æœ¬ï¼ˆéšæœºç§å­ä¸º20200501,æ€»ä½“æƒ…å†µæœªçŸ¥ï¼‰ï¼Œåˆ†åˆ«è®¡ç®—æ€»ä½“ã€æ ·æœ¬å’ŒæŠ½æ ·åˆ†å¸ƒçš„å‡å€¼ã€æ–¹å·®å’Œæ ‡å‡†å·®


#### 2.æ ¹æ®æ ·æœ¬ä¿¡æ¯ï¼Œå¯¹æ€»ä½“è¿›è¡ŒåŒºé—´ä¼°è®¡
* æ‰¿æ¥ä¸Šæ–‡æŠ½æ ·èƒŒæ™¯ï¼Œè®¡ç®—2015å¹´ä¸»èŒæ€»æ”¶å…¥çš„99%çš„ç½®ä¿¡åŒºé—´
* ç¬¬ä¸€ç§æ–¹æ³•ï¼šæ ¹æ®ç»Ÿè®¡å…¬å¼ç›´æ¥è¿›è¡ŒåŒºé—´ä¼°è®¡
```
dataset activate clds.
compute interval_lower = sampling_mean_sam1 - 2.58*sampling_sd_sam1.
compute interval_upper = sampling_mean_sam1 + 2.58*sampling_sd_sam1.
descriptives sampling_mean_sam1 interval_lower interval_upper
	/statistics mean.
```
* ç¬¬äºŒç§æ–¹æ³•ï¼šåˆ©ç”¨è¯­æ³•examineè¿›è¡ŒåŒºé—´ä¼°è®¡
```
examine variables = income
	/plot none
	/cinterval 99.
```
* ç¬¬ä¸‰ç§æ–¹æ³•ï¼šåˆ©ç”¨æ‹”é´æ³•ä¿®æ­£çš„æŠ½æ ·è¯¯å·®è¿›è¡ŒåŒºé—´ä¼°è®¡
	* ç‚¹é€‰æ“ä½œä¸ºï¼šåˆ†æ -> æè¿°ç»Ÿè®¡ -> æ¢ç´¢ -> åœ¨å·¦ä¾§å˜é‡åˆ—è¡¨ä¸­é€‰æ‹©å˜é‡ -> é€‰æ‹©ç»Ÿè®¡ -> å‹¾é€‰æè¿°å¹¶å¡«å…¥ç½®ä¿¡åŒºé—´ -> ç»§ç»­
-> è‡ªåŠ©æŠ½æ · -> å‹¾é€‰æ‰§è¡Œè‡ªåŠ©æŠ½æ ·ï¼ˆå¡«å…¥æ ·æœ¬æ•°å°äºåŸå§‹æ ·æœ¬æ•°ï¼‰ -> å¡«å…¥ç½®ä¿¡åŒºé—´ -> ç»§ç»­ -> ç¡®å®šï¼›
	* è¯­æ³•ç»“æ„åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸€ä¸ºæ‹”é´æ³•è®¾ç½®è¯­æ³•ï¼Œå…¶äºŒä¸ºåŒºé—´ä¼°è®¡è¯­æ³•ï¼Œå…·ä½“ä¸ºï¼š
bootstrap + /variables target = + â€œå˜é‡åâ€ + /criteria cilevel = + â€œç½®ä¿¡åŒºé—´â€ + nsamples = â€œé‡å¤æŠ½æ ·ä¸­çš„æ ·æœ¬è§„æ¨¡â€ .
* ç”¨æ‹”é´æ³•è®¡ç®—2015å¹´ä¸»èŒæ€»æ”¶å…¥çš„99%çš„ç½®ä¿¡åŒºé—´.
```
bootstrap 
	/variables target = income 
	/criteria cilevel = 99 nsamples = 400.
examine variables = income
	/plot none
	/cinterval 99.
```
* éšå ‚ç»ƒä¹ ï¼šä»¥ç”Ÿæ´»å¹¸ç¦æ„Ÿï¼ˆI7_6_1ï¼‰ä½œä¸ºæ€»ä½“ï¼ŒéšæœºæŠ½å–400ä¸ªæ ·æœ¬ï¼ˆéšæœºç§å­ä¸º20200501,æ€»ä½“æƒ…å†µæœªçŸ¥ï¼‰ï¼Œè®¡ç®—95%ç½®ä¿¡åŒºé—´ï¼ˆZå€¼ä¸º1.96ï¼‰


#### 3.ä»¥æŠ½æ ·åˆ†å¸ƒçš„æ ‡å‡†å·®ä½œä¸ºä¸åŒå›¾å±‚ï¼Œç»˜åˆ¶æŠ½æ ·åˆ†å¸ƒå›¾å’ŒåŒºé—´åˆ†å¸ƒå›¾
* æ³¨æ„ï¼šä»¥ä¸‹ä¸ºStataå‘½ä»¤
* ç»˜åˆ¶æŠ½æ ·åˆ†å¸ƒå›¾
* åŸå§‹æŠ½æ ·åˆ†å¸ƒ
```
local path "F:/General Database of Social Science/Courses/prepare for course/Statistics Software for Social Science II"
#delimit;
graph twoway 
	(function y=normalden(x,30123.83584,1147.37221), range(25000 35000)lw(medthin)color(gs16) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(31271.20805 32418.58026)lw(medthin)color(gs13) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(32418.58026 33565.95247)lw(medthin)color(gs9) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(33565.95247 34713.32468)lw(medthin)color(gs0) recast(area))	
	(function y=normalden(x,30123.83584,1147.37221), range(27829.09142 28976.46363)lw(medthin)color(gs13) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(26681.71921 27829.09142)lw(medthin)color(gs9) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(25534.34700 26681.71921)lw(medthin)color(gso) recast(area))	
	(function y=normalden(x,30123.83584,1147.37221), range(25000 35000)lw(medthin)lpattern(solid)),
	title("Normal Distribution for Income")
	xtitle("income(sample mean)", size(medlarge)) ytitle("density")
	legend(off) 
	xlabel(25534 26682 27829 28976 30124 31271 32419 33566 34713, grid gmin gmax);
graph export "`path'\Week 10\1.normal_income(with notation).png", as(png) width(4000) replace;
graph twoway 
	(function y=normalden(x,30123.83584,1147.37221), range(25000 35000)lw(medthin)color(gs16) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(31271.20805 32418.58026)lw(medthin)color(gs13) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(32418.58026 33565.95247)lw(medthin)color(gs9) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(33565.95247 34713.32468)lw(medthin)color(gs0) recast(area))	
	(function y=normalden(x,30123.83584,1147.37221), range(27829.09142 28976.46363)lw(medthin)color(gs13) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(26681.71921 27829.09142)lw(medthin)color(gs9) recast(area))
	(function y=normalden(x,30123.83584,1147.37221), range(25534.34700 26681.71921)lw(medthin)color(gso) recast(area))	
	(function y=normalden(x,30123.83584,1147.37221), range(25000 35000)lw(medthin)lpattern(solid)),
	title("Normal Distribution for Income")
	xtitle("income(sample mean)", size(medlarge)) ytitle("density")
	legend(off) 
	xlabel(25534.34700 "-4 sd" 26681.71921 "-3 sd" 27829.09142 "-2 sd" 28976.46363 "-1 sd" 30123.83584 "mean" 31271.20805 "1 sd" 32418.58026 "2 sd" 33565.95247 "3 sd " 34713.32468 "4 sd", grid gmin gmax);
graph export "`path'\Week 10\2.normal_income(without notation).png", as(png) width(4000) replace;
#delimit cr
```
* æ ‡å‡†æ­£æ€åˆ†å¸ƒ
```
#delimit;
graph twoway 
	(function y=normalden(x), range(-4 4)lw(medthin)color(gs16) recast(area))
	(function y=normalden(x), range(1 2)lw(medthin)color(gs13) recast(area))
	(function y=normalden(x), range(2 3)lw(medthin)color(gs9) recast(area))
	(function y=normalden(x), range(3 4)lw(medthin)color(gs0) recast(area))	
	(function y=normalden(x), range(-2 -1)lw(medthin)color(gs13) recast(area))
	(function y=normalden(x), range(-3 -2)lw(medthin)color(gs9) recast(area))
	(function y=normalden(x), range(-4 -3)lw(medthin)color(gso) recast(area))	
	(function y=normalden(x), range(-4 4)lw(medthin)lpattern(solid)),
	title("Standard Normal Distribution for Income")
	xtitle("income(sample mean)", size(medlarge)) ytitle("density")
	legend(off) 
	xlabel(-4 "-4 sd" -3 "-3 sd" -2 "-2 sd" -1 "-1 sd" 0 "0" 1 "1 sd" 2 "2 sd" 3 "3 sd " 4 "4 sd", grid gmin gmax);
graph export "`path'\Week 10\3.standard normal_income(with notation).png", as(png) width(4000) replace;
#delimit cr
```
* ç»˜åˆ¶åŒºé—´åˆ†å¸ƒå›¾
```
cd "`path'\data"
use clds2016_i.dta,clear
drop if I3a_6 == . | I3a_6 < 0
rename I3a_6 income
foreach i of numlist 1(1)100 {
	preserve
	set seed `i'0430
	sample 500,count
	ci mean income,level(95)
	gen income_lower = r(lb)
	gen income_upper = r(ub)
	keep if _n == 1
	keep income_lower income_upper
	sxpose,clear force
	destring _var1,replace
	rename _var1 interval_`i'
	gen id = _n
	gen id_`i' = `i'
	sa "simulation4/income_`i'.dta",replace
	restore
}

cd "`path'\data\simulation4"
use income_1.dta,clear
foreach i of numlist 2(1)100 {
	merge 1:1 id using income_`i'.dta,nogen
}


sa income_all.dta,replace
```

* å°†é‡å¤æŠ½æ ·ç»“æœç»˜åˆ¶åœ¨åŒä¸€å¼ å›¾ä¸Š
```
use income_all,clear
local c "connect"
local v "interval"
local s "msymbol(pipe)"
local l "lw(medthick)"
#delimit;
twoway (`c' id_1 `v'_1,`s'`l')(`c' id_2 `v'_2,`s'`l')
       (`c' id_3 `v'_3,`s'`l')(`c' id_4 `v'_4,`s'`l')
	   (`c' id_5 `v'_5,`s'`l')(`c' id_6 `v'_6,`s'`l'),
		xline(30123.83584131327,lpattern(dash))legend(off) 
		title("Confident Intervals for Total Income(n = 500)")
		xtitle("confident interval for repeat sampling(ğ›¼ = 0.05)") ytitle("sampling No.")
		xlabel(15000(5000)45000)ylabel(0(1)6);
graph export "`path'\Week 10\4.confident interval.png", as(png) width(4000) replace;
twoway (`c' id_1 `v'_1,`s')(`c' id_2 `v'_2,`s')
       (`c' id_3 `v'_3,`s')(`c' id_4 `v'_4,`s')
	   (`c' id_5 `v'_5,`s')(`c' id_6 `v'_6,`s')
	   (`c' id_7 `v'_7,`s')(`c' id_8 `v'_8,`s')
	   (`c' id_9 `v'_9,`s')(`c' id_10 `v'_10,`s')
	   (`c' id_11 `v'_11,`s')(`c' id_12 `v'_12,`s')
       (`c' id_13 `v'_13,`s')(`c' id_14 `v'_14,`s')
	   (`c' id_15 `v'_15,`s')(`c' id_16 `v'_16,`s')
	   (`c' id_17 `v'_17,`s')(`c' id_18 `v'_18,`s')
	   (`c' id_19 `v'_19,`s')(`c' id_20 `v'_20,`s')
	   (`c' id_21 `v'_21,`s')(`c' id_22 `v'_22,`s')
       (`c' id_23 `v'_23,`s')(`c' id_24 `v'_24,`s')
	   (`c' id_25 `v'_25,`s')(`c' id_26 `v'_26,`s')
	   (`c' id_27 `v'_27,`s')(`c' id_28 `v'_28,`s')
	   (`c' id_29 `v'_29,`s')(`c' id_30 `v'_30,`s')
	   (`c' id_31 `v'_31,`s')(`c' id_32 `v'_32,`s')
       (`c' id_33 `v'_33,`s')(`c' id_34 `v'_34,`s')
	   (`c' id_35 `v'_35,`s')(`c' id_36 `v'_36,`s')
	   (`c' id_37 `v'_37,`s')(`c' id_38 `v'_38,`s')
	   (`c' id_39 `v'_39,`s')(`c' id_40 `v'_40,`s')
	   (`c' id_41 `v'_41,`s')(`c' id_42 `v'_42,`s')
       (`c' id_43 `v'_43,`s')(`c' id_44 `v'_44,`s')
	   (`c' id_45 `v'_45,`s')(`c' id_46 `v'_46,`s')
	   (`c' id_47 `v'_47,`s')(`c' id_48 `v'_48,`s')
	   (`c' id_49 `v'_49,`s')(`c' id_50 `v'_50,`s')
	   (`c' id_51 `v'_51,`s')(`c' id_52 `v'_52,`s')
       (`c' id_53 `v'_53,`s')(`c' id_54 `v'_54,`s')
	   (`c' id_55 `v'_55,`s')(`c' id_56 `v'_56,`s')
	   (`c' id_57 `v'_57,`s')(`c' id_58 `v'_58,`s')
	   (`c' id_59 `v'_59,`s')(`c' id_60 `v'_60,`s')
	   (`c' id_61 `v'_61,`s')(`c' id_62 `v'_62,`s')
       (`c' id_63 `v'_63,`s')(`c' id_64 `v'_64,`s')
	   (`c' id_65 `v'_65,`s')(`c' id_66 `v'_66,`s')
	   (`c' id_67 `v'_67,`s')(`c' id_68 `v'_68,`s')
	   (`c' id_69 `v'_69,`s')(`c' id_70 `v'_70,`s')
	   (`c' id_71 `v'_71,`s')(`c' id_72 `v'_72,`s')
       (`c' id_73 `v'_73,`s')(`c' id_74 `v'_74,`s')
	   (`c' id_75 `v'_75,`s')(`c' id_76 `v'_76,`s')
	   (`c' id_77 `v'_77,`s')(`c' id_78 `v'_78,`s')
	   (`c' id_79 `v'_79,`s')(`c' id_80 `v'_80,`s')
	   (`c' id_81 `v'_81,`s')(`c' id_82 `v'_82,`s')
       (`c' id_83 `v'_83,`s')(`c' id_84 `v'_84,`s')
	   (`c' id_85 `v'_85,`s')(`c' id_86 `v'_86,`s')
	   (`c' id_87 `v'_87,`s')(`c' id_88 `v'_88,`s')
	   (`c' id_89 `v'_89,`s')(`c' id_90 `v'_90,`s')
	   (`c' id_91 `v'_91,`s')(`c' id_92 `v'_92,`s')
       (`c' id_93 `v'_93,`s')(`c' id_94 `v'_94,`s')
	   (`c' id_95 `v'_95,`s')(`c' id_96 `v'_96,`s')
	   (`c' id_97 `v'_97,`s')(`c' id_98 `v'_98,`s')
	   (`c' id_99 `v'_99,`s')(`c' id_100 `v'_100,`s'),
		xline(30123.83584131327,lpattern(dash))legend(off) 
		title("Confident Intervals for Total Income(n = 500)")
		xtitle("confident interval for repeat sampling(ğ›¼ = 0.05)") ytitle("sampling No.")
		xlabel(15000(5000)45000)ylabel(0(10)100);
graph export "`path'\Week 10\5.confident interval.png", as(png) width(4000) replace;
#delimit cr
```

#### 4.ç¼–åˆ¶å‡å€¼è¡¨
* å‡å€¼è¡¨å¯ä»¥æä¾›å˜é‡çš„åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯
* ç‚¹é€‰æ“ä½œä¸ºï¼šåˆ†æ -> æ¯”è¾ƒå¹³å‡å€¼ -> å¹³å‡å€¼ -> åœ¨å·¦ä¾§å˜é‡åˆ—è¡¨ä¸­é€‰æ‹©å˜é‡ï¼ˆè‹¥åˆ†ç»„ï¼Œåœ¨å±‚ä¸­é€‰æ‹©åˆ†ç»„å˜é‡ï¼‰ -> ç‚¹å‡»â€œé€‰é¡¹â€ -> é€‰æ‹©ç»Ÿè®¡é‡ -> ç»§ç»­ -> å¯é€‰è‡ªåŠ©æŠ½æ · -> å‹¾é€‰æ‰§è¡Œè‡ªåŠ©æŠ½æ ·ï¼ˆå¡«å…¥æ ·æœ¬æ•°å°äºåŸå§‹æ ·æœ¬æ•°ï¼‰ -> å¡«å…¥ç½®ä¿¡åŒºé—´ -> ç»§ç»­ -> ç¡®å®š
* è¯­æ³•ç»“æ„ä¸ºï¼šmeans + å˜é‡åï¼ˆè‹¥åˆ†ç»„ï¼Œåˆ™å†åŠ ä¸Šâ€œby åˆ†ç»„å˜é‡åâ€ï¼‰ + /cells = + ç»Ÿè®¡é‡ï¼ˆmeanå‡å€¼ã€countä¸ªæ•°ã€varæ–¹å·®ã€stddevæ ‡å‡†å·®ã€semeanå‡å€¼æ ‡å‡†è¯¯å·®ã€minæœ€å°å€¼ã€maxæœ€å¤§å€¼ï¼‰

#### æ¡ˆä¾‹ï¼ˆ4-1ï¼‰ï¼šç¼–åˆ¶2015å¹´ä¸»èŒæ€»æ”¶å…¥å‡å€¼è¡¨
* å¯¼å…¥2016å¹´ä¸­å›½åŠ³åŠ¨åŠ›åŠ¨æ€è°ƒæŸ¥æ•°æ®å’Œæ„é€ incomeå˜é‡
```
get file "clds2016_i.sav".
execute.
dataset names clds window = front.
dataset activate clds.
select if (I3a_6  >= 0).
compute income = I3a_6.
```
* æŸ¥çœ‹2015å¹´ä¸»èŒæ€»æ”¶å…¥çš„å‡å€¼ã€æ ·æœ¬é‡ã€æ–¹å·®å’Œæ ‡å‡†å·®
```
means income
	/cells = mean count var stddev.
```
* æŒ‰æ€§åˆ«åˆ†ç»„æè¿°
```
means income by gender
	/cells = mean count var stddev.
```
* å‡å€¼è¡¨é™„åŠ åŠŸèƒ½ï¼šç”¨æ‹”é´æ³•è®¡ç®—ç½®ä¿¡åŒºé—´
```
bootstrap 
	/variables target = income 
	/criteria cilevel = 99 nsamples = 1400.
means income
	/cells = mean count var stddev semean min max.
```
#### éšå ‚ç»ƒä¹ ï¼šæŒ‰æ€§åˆ«åˆ†ç»„å‘ˆç°æœ€é«˜æ•™è‚²ç¨‹åº¦ï¼ˆI2_1ï¼‰çš„åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯


#### 5.åŸºäºè°ƒæŸ¥æ•°æ®çš„å•æ ·æœ¬æ€»ä½“å‡å€¼æ£€éªŒ
* å•æ ·æœ¬çš„æ€»ä½“å‡å€¼æ£€éªŒæ˜¯å¯¹â€œæ ¹æ®æ ·æœ¬ä¿¡æ¯ï¼Œåˆ¤æ–­æ€»ä½“å‡å€¼æ˜¯å¦ç­‰äºæŸä¸€ç¡®å®šå–å€¼â€çš„å‡è®¾æ£€éªŒ.
* ç‚¹é€‰æ“ä½œä¸ºï¼šåˆ†æ -> æ¯”è¾ƒå¹³å‡å€¼ -> å•æ ·æœ¬Tæ£€éªŒ -> åœ¨å·¦ä¾§å˜é‡åˆ—è¡¨ä¸­é€‰æ‹©æ£€éªŒå˜é‡ -> åœ¨â€œæ£€éªŒå€¼â€ä¸­å¡«å…¥æ€»ä½“å‡å€¼ -> ç‚¹å‡»â€œé€‰é¡¹â€ -> å¡«å…¥ç½®ä¿¡åŒºé—´ -> ç»§ç»­ -> å¯é€‰è‡ªåŠ©æŠ½æ · -> å‹¾é€‰æ‰§è¡Œè‡ªåŠ©æŠ½æ ·ï¼ˆå¡«å…¥æ ·æœ¬æ•°å°äºåŸå§‹æ ·æœ¬æ•°ï¼‰ -> å¡«å…¥ç½®ä¿¡åŒºé—´ -> ç»§ç»­ -> ç¡®å®š
* è¯­æ³•ç»“æ„ä¸ºï¼št-test + /testval = + æ€»ä½“å‡å€¼ + /variables = + å¾…æ£€éªŒå˜é‡ + /criteria = + ci(â€œ1-Î±â€å–å€¼)

#### æ¡ˆä¾‹ï¼ˆ5-1ï¼‰ï¼šæ ¹æ®æ ·æœ¬ä¿¡æ¯ï¼Œåœ¨ç½®ä¿¡åŒºé—´ä¸º99%çš„å‰æä¸‹ï¼Œåˆ¤æ–­2015å¹´ä¸»èŒæ€»æ”¶å…¥çš„æ€»ä½“å‡å€¼æ˜¯å¦ç­‰äº25000å…ƒã€‚è¯·å†™å‡ºè™šæ— å‡è®¾ã€ç ”ç©¶å‡è®¾å’Œæ£€éªŒè¿‡ç¨‹
* è™šæ— å‡è®¾H0ï¼š2015å¹´ä¸»èŒæ€»æ”¶å…¥ï¼ˆçš„æ€»ä½“å‡å€¼ï¼‰ç­‰äº25000å…ƒ
* ç ”ç©¶å‡è®¾H1ï¼š2015å¹´ä¸»èŒæ€»æ”¶å…¥ï¼ˆçš„æ€»ä½“å‡å€¼ï¼‰ä¸ç­‰äº25000å…ƒ

#### æ³¨æ„ï¼šæ­¤èŠ‚å·²å°†2016å¹´ä¸­å›½åŠ³åŠ¨åŠ›åŠ¨æ€è°ƒæŸ¥æ•°æ®å½“ä½œæ ·æœ¬ï¼Œä¸å‰æ–‡æ¨¡æ‹ŸæŠ½æ ·æ—¶å½“ä½œæ€»ä½“æœ‰æœ¬è´¨åŒºåˆ«
#### ç¬¬ä¸€ç§æ–¹æ³•ï¼šæ ¹æ®ç»Ÿè®¡å…¬å¼ç›´æ¥è¿›è¡Œè®¡ç®—
* ç¬¬ä¸€ç§æ–¹æ³•åˆå¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼åˆ¤æ–­
* ç¬¬ä¸€ç§æ–¹å¼ï¼šé€šè¿‡Zå€¼åˆ¤æ–­ï¼ˆè‹¥Zå€¼å¤§äº2.576ï¼Œåˆ™æ‹’ç»åŸå‡è®¾ï¼‰
	* ç¬¬ä¸€æ­¥ï¼šè®¡ç®—æ ·æœ¬å‡å€¼
```
aggregate 
	/sam_income_mean = mean(income).
```

	* ç¬¬äºŒæ­¥ï¼šè®¡ç®—æ ·æœ¬ç¦»å·®å¹³æ–¹
```
compute diff_sq = (income - sam_income_mean)**2.
```

	* ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—æ ·æœ¬ç¦»å·®å¹³æ–¹å’Œ
```
aggregate 
	/diff_sq_sum = sum(diff_sq).
```

	* ç¬¬å››æ­¥ï¼šè®¡ç®—æ€»ä½“æ–¹å·®ï¼ˆç»è¿‡è´å¡å°”æ ¡æ­£ï¼‰
```
compute income_var = diff_sq_sum/(1462-1).
```

	* ç¬¬äº”æ­¥ï¼šè®¡ç®—æ€»ä½“æ ‡å‡†å·®ï¼ˆç»è¿‡è´å¡å°”æ ¡æ­£ï¼‰
```
compute income_sd = sqrt(income_var).
```

	* ç¬¬å…­æ­¥ï¼šè®¡ç®—æŠ½æ ·åˆ†å¸ƒæ ‡å‡†å·®
```
compute income_se = income_sd/sqrt(1462).
```

	* ç¬¬ä¸ƒæ­¥ï¼šè®¾å®šè™šæ— å‡è®¾æ­£ç¡®æ—¶çš„æ€»ä½“å‡å€¼
		* è‹¥è™šæ— å‡è®¾æ­£ç¡®ï¼Œæ€»ä½“å‡å€¼ä¸º25000
```
compute pop_income_mean = 25000.
```

	* ç¬¬å…«æ­¥ï¼šè®¡ç®—Zå€¼ï¼ˆä»¥æŠ½æ ·åˆ†å¸ƒçš„æ ‡å‡†å·®ä¸ºå•ä½ï¼Œåº¦é‡æ ·æœ¬å‡å€¼åˆ°æ€»ä½“å‡å€¼çš„è·ç¦»ï¼‰
```
compute Z_score = (sam_income_mean-pop_income_mean)/income_se.
formats Z_score (f20.16).
descriptives Z_score
	/statistics mean.
```
* å¯çŸ¥å®é™…Zå€¼ï¼ˆ4.464186ï¼‰å¤§äº99%ç½®ä¿¡åŒºé—´çš„Zå€¼ï¼ˆ2.576ï¼‰ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾.

* ç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡åŒºé—´ä¼°è®¡å€¼åˆ¤æ–­ï¼ˆè‹¥99%ç½®ä¿¡åŒºé—´ä¸‹å¾—åˆ°çš„åŒºé—´ä¼°è®¡å€¼ä¸åŒ…å«25000ï¼Œåˆ™æ‹’ç»è™šæ— å‡è®¾ï¼‰
	* è¿™é‡Œç¬¬ä¸€è‡³å…­çš„æ­¥éª¤åŒç¬¬ä¸€ç§æ–¹å¼
	* ç¬¬ä¸ƒæ­¥ï¼šåœ¨99%ç½®ä¿¡åŒºé—´ä¸‹ï¼Œä¼°è®¡æ€»ä½“å‡å€¼çš„åŒºé—´ä¸Šé™å’ŒåŒºé—´ä¸‹é™
```
compute income_upper = sam_income_mean+2.576*income_se.
compute income_lower = sam_income_mean-2.576*income_se.
formats income_lower income_upper (f20.16).
descriptives income_lower income_upper
	/statistics mean.
```
* å¯çŸ¥åŒºé—´ä¸‹é™ä¸º27167.193698ï¼Œä¸åŒ…å«25000ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾

* ç¬¬ä¸‰ç§æ–¹å¼ï¼šé€šè¿‡på€¼åˆ¤æ–­ï¼ˆåœ¨99%ç½®ä¿¡åŒºé—´ä¸‹ï¼Œpå€¼è‹¥å°äºÎ±å³0.01ï¼Œåˆ™æ‹’ç»è™šæ— å‡è®¾ï¼‰
```
formats sam_income_mean pop_income_mean income_se(f20.16).
descriptives sam_income_mean pop_income_mean income_se
	/statistics mean.
```
* å°½ç®¡å¤§æ ·æœ¬ï¼ˆn â‰¥ 30ï¼‰çš„æŠ½æ ·åˆ†å¸ƒä¸ºæ­£æ€åˆ†å¸ƒï¼Œä½†SPSSè½¯ä»¶çš„æ€»ä½“å‡å€¼æ£€éªŒé»˜è®¤å°†æ­£æ€åˆ†å¸ƒè§†ä½œtåˆ†å¸ƒçš„ç‰¹ä¾‹
* æ ¹æ®tåˆ†å¸ƒç‰¹æ€§ï¼Œåœ¨å¤§æ ·æœ¬æƒ…å†µä¸‹,tåˆ†å¸ƒè¿‘ä¼¼æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼›éšç€æ ·æœ¬è§„æ¨¡å¢åŠ ï¼Œtåˆ†å¸ƒè¶Šè¿‘ä¼¼æ ‡å‡†æ­£æ€åˆ†å¸ƒ
* å› æ­¤ï¼Œæ€»ä½“å‡å€¼æ£€éªŒå¯ä»¥åˆ©ç”¨æ­£æ€åˆ†å¸ƒç‰¹æ€§ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨tåˆ†å¸ƒç‰¹æ€§
	* åœ¨æ­£æ€åˆ†å¸ƒä¸‹ï¼ŒPå€¼ç­‰äºæ•´ä¸ªæ­£æ€åˆ†å¸ƒçš„ç´¯ç§¯å¯†åº¦ï¼ˆé¢ç§¯=1ï¼‰ä¸æ ·æœ¬å‡å€¼å¤„çš„ç´¯ç§¯å¯†åº¦ï¼ˆé¢ç§¯ = cdf.normal(æ ·æœ¬å‡å€¼,æ€»ä½“å‡å€¼,æŠ½æ ·åˆ†å¸ƒæ ‡å‡†å·®)æˆ–cdf.normal(å®é™…Zå€¼,0,1)ï¼‰ä¹‹å·®çš„2å€
	* åœ¨tåˆ†å¸ƒä¸‹ï¼ŒPå€¼ç­‰äºæ•´ä¸ªtåˆ†å¸ƒçš„ç´¯ç§¯å¯†åº¦ï¼ˆé¢ç§¯=1ï¼‰ä¸æ ·æœ¬å‡å€¼å¤„çš„ç´¯ç§¯å¯†åº¦ï¼ˆé¢ç§¯ = cdf.t(å®é™…Zå€¼,è‡ªç”±åº¦)ï¼‰ä¹‹å·®çš„2å€
```
compute p_value_normal_1 = (1 - cdf.normal(30123.835841,25000,1147.764807007452400))*2.
compute p_value_normal_2 = (1 - cdf.normal(4.464186,0,1))*2.
compute p_value_t = (1 - cdf.t(4.464186,1461))*2.
formats p_value_normal_1 p_value_normal_2 p_value_t (f20.16).
descriptives p_value_normal_1 p_value_normal_2 p_value_t
	/statistics mean.
```
* å¯çŸ¥på€¼ï¼ˆ=0.000008037æˆ–0.000008654714756ï¼‰å°äº0.01ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾

#### ç¬¬äºŒç§æ–¹æ³•ï¼šåˆ©ç”¨è¯­æ³•t-testè¿›è¡Œè®¡ç®—
```
t-test
	/testval = 25000
	/variables = income
	/criteria = ci(0.99).
```
* å¯çŸ¥på€¼ï¼ˆ=0.000009ï¼‰å°äº0.01ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾

#### ç¬¬ä¸‰ç§æ–¹æ³•ï¼šé‡‡ç”¨æ‹”é´æ³•ï¼ˆä»å·²æœ‰1462ä¸ªæ ·æœ¬ä¸æ–­é‡å¤æŠ½å–1400ä¸ªæ ·æœ¬ï¼‰ä¿®æ­£æŠ½æ ·åˆ†å¸ƒæ ‡å‡†è¯¯åï¼Œå†è¿›è¡Œå‡è®¾æ£€éªŒ
```
bootstrap 
	/variables target = income 
	/criteria cilevel = 99 nsamples = 1400.
t-test
	/testval = 25000
	/variables = income
	/criteria = ci(0.99).
```
* å¯çŸ¥på€¼ï¼ˆ=0.000714ï¼‰å°äº0.01ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾

#### éšå ‚ç»ƒä¹ ï¼šè¯•æ£€éªŒ2015å¹´ä¸­å›½åŠ³åŠ¨è€…çš„å¹³å‡æœ€é«˜æ•™è‚²ç¨‹åº¦ï¼ˆI2_1ï¼‰æ˜¯å¦ç­‰äº8å¹´ï¼Œç½®ä¿¡åŒºé—´ä¸º95%


#### 6.åŸºäºè°ƒæŸ¥æ•°æ®çš„ç‹¬ç«‹æ ·æœ¬æ€»ä½“å‡å€¼æ£€éªŒ
* ç‚¹é€‰æ“ä½œä¸ºï¼šåˆ†æ -> æ¯”è¾ƒå¹³å‡å€¼ -> ç‹¬ç«‹æ ·æœ¬Tæ£€éªŒ -> é€‰æ‹©æ£€éªŒå˜é‡ -> é€‰æ‹©åˆ†ç»„å˜é‡ï¼ˆå®šä¹‰æ¯”è¾ƒç»„æ—¶ï¼Œå¡«å…¥å˜é‡å–å€¼ï¼‰-> é€‰é¡¹ï¼ˆå¡«å…¥ç½®ä¿¡åŒºé—´ï¼‰ -> ç»§ç»­ -> å¯é€‰è‡ªåŠ©æŠ½æ · -> å‹¾é€‰æ‰§è¡Œè‡ªåŠ©æŠ½æ ·ï¼ˆå¡«å…¥æ ·æœ¬æ•°å°äºåŸå§‹æ ·æœ¬æ•°ï¼‰ -> å¡«å…¥ç½®ä¿¡åŒºé—´ -> ç»§ç»­ -> ç¡®å®š
* è¯­æ³•ç»“æ„ä¸ºï¼št-test groups = + åˆ†ç»„å˜é‡ï¼ˆä»£è¡¨ä¸åŒç»„çš„å˜é‡å–å€¼ï¼‰+ /variables = æ£€éªŒå˜é‡ + /criteria = ci(ç½®ä¿¡åŒºé—´)

#### æ¡ˆä¾‹ï¼ˆ6-1ï¼‰ï¼šæ ¹æ®æ ·æœ¬ä¿¡æ¯ï¼Œåœ¨ç½®ä¿¡åŒºé—´ä¸º99%çš„å‰æä¸‹ï¼Œåˆ¤æ–­2015å¹´ä¸­å›½ç”·æ€§å’Œå¥³æ€§ä¸»èŒæ€»æ”¶å…¥çš„æ€»ä½“å‡å€¼æ˜¯å¦ç›¸ç­‰
* è¯·å†™å‡ºè™šæ— å‡è®¾ã€ç ”ç©¶å‡è®¾å’Œæ£€éªŒè¿‡ç¨‹
	* è™šæ— å‡è®¾H0ï¼šç”·æ€§å’Œå¥³æ€§çš„2015å¹´ä¸»èŒæ€»æ”¶å…¥ï¼ˆçš„æ€»ä½“å‡å€¼ï¼‰ç›¸ç­‰ï¼ˆå³ä¸¤è€…å‡å€¼ä¹‹å·®ä¸º0ï¼‰
	* ç ”ç©¶å‡è®¾H1ï¼šç”·æ€§å’Œå¥³æ€§çš„2015å¹´ä¸»èŒæ€»æ”¶å…¥ï¼ˆçš„æ€»ä½“å‡å€¼ï¼‰ä¸ç›¸ç­‰ï¼ˆå³ä¸¤è€…å‡å€¼ä¹‹å·®ä¸ä¸º0ï¼‰

#### ç¬¬ä¸€ç§æ–¹æ³•ï¼šåœ¨å¤§æ ·æœ¬ï¼ˆn â‰¥ 30ï¼‰æƒ…å†µä¸‹ï¼Œæ ¹æ®ç»Ÿè®¡å…¬å¼ç›´æ¥è¿›è¡Œè®¡ç®—ï¼ŒåŒ…å«ä¸‰ç§æ–¹å¼
* ç¬¬ä¸€ç§æ–¹å¼ï¼šé€šè¿‡Zå€¼åˆ¤æ–­ï¼ˆè‹¥Zå€¼å¤§äº2.576ï¼Œåˆ™æ‹’ç»åŸå‡è®¾ï¼‰
	* ç¬¬ä¸€æ­¥ï¼šæŸ¥çœ‹ç”·æ€§æ ·æœ¬å’Œå¥³æ€§æ ·æœ¬2015å¹´ä¸»èŒæ€»æ”¶å…¥çš„ä¸ªæ¡ˆæ•°ã€å‡å€¼ã€æ–¹å·®å’Œæ ‡å‡†å·®
```
means tables = income by gender
	/cells = count mean var stddev.
```
	* ç¬¬äºŒæ­¥ï¼šä»¥ç”·å¥³æ ·æœ¬å‡å€¼ä¹‹å·®ä½œä¸ºæ€»ä½“å‡å€¼ä¹‹å·®çš„æ— åä¼°è®¡
```
compute male_mean = 34905.0726.
compute female_mean = 24134.397535.
compute diff_mean = male_mean - female_mean.
```
	* ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—ç”·å¥³æ ·æœ¬å‡å€¼ä¹‹å·®æ‰€æ„æˆçš„æŠ½æ ·åˆ†å¸ƒçš„æ–¹å·®
```
compute male_n = 813.
compute female_n = 649.
compute male_var = 2505693660.582166.
compute female_var =  1137925108.002217.
compute diff_var = male_var/male_n + female_var/female_n.
compute diff_se = sqrt(diff_var).
```
	* ç¬¬å››æ­¥ï¼šè®¡ç®—Zå€¼ï¼ˆä»¥æŠ½æ ·åˆ†å¸ƒçš„æ ‡å‡†å·®ä¸ºå•ä½ï¼Œåº¦é‡ç”·å¥³æ ·æœ¬å‡å€¼ä¹‹å·®åˆ°æ€»ä½“å‡å€¼ä¹‹å·®å³0çš„è·ç¦»ï¼‰
```
compute Z_score_diff = (diff_mean-0)/diff_se.
formats Z_score_diff (f20.16).
descriptives Z_score_diff
	/statistics mean.
```
* å¯çŸ¥å®é™…Zå€¼ï¼ˆ4.898096895558914ï¼‰å¤§äº99%ç½®ä¿¡åŒºé—´çš„Zå€¼ï¼ˆ2.576ï¼‰ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾

* ç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡åŒºé—´ä¼°è®¡å€¼åˆ¤æ–­ï¼ˆè‹¥99%ç½®ä¿¡åŒºé—´ä¸‹å¾—åˆ°çš„åŒºé—´ä¼°è®¡å€¼ä¸åŒ…å«0ï¼Œåˆ™æ‹’ç»è™šæ— å‡è®¾ï¼‰
	* è¿™é‡Œç¬¬ä¸€ã€äºŒæ­¥åŒç¬¬ä¸€ç§æ–¹å¼
	* ç¬¬ä¸‰æ­¥ï¼šåœ¨99%ç½®ä¿¡åŒºé—´ä¸‹ï¼Œä¼°è®¡ç”·å¥³æ”¶å…¥æ€»ä½“å·®å€¼ä¹‹å‡å€¼çš„åŒºé—´ä¸Šé™å’ŒåŒºé—´ä¸‹é™
```
compute diff_upper = diff_mean+2.576*diff_se.
compute diff_lower = diff_mean-2.576*diff_se.
formats diff_lower diff_upper (f20.16).
descriptives diff_lower diff_upper
	/statistics mean.
```	
* å¯çŸ¥åŒºé—´ä¸‹é™ä¸º5106.177290ï¼Œä¸åŒ…å«0ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾

* ç¬¬ä¸‰ç§æ–¹å¼ï¼šé€šè¿‡på€¼åˆ¤æ–­ï¼ˆåœ¨99%ç½®ä¿¡åŒºé—´ä¸‹ï¼Œpå€¼è‹¥å°äºÎ±å³0.01ï¼Œåˆ™æ‹’ç»è™šæ— å‡è®¾ï¼‰
```
formats diff_mean diff_se Z_score_diff(f20.16).
descriptives diff_mean diff_se Z_score_diff
	/statistics mean.
compute p_normal_diff_1 = (1 - cdf.normal(10770.675065,0,2198.951000))*2.
compute p_normal_diff_2  = (1 - cdf.normal(4.898096895558914,0,1))*2.
formats p_normal_diff_1 p_normal_diff_2 (f20.16).
descriptives p_normal_diff_1 p_normal_diff_2
	/statistics mean.
```
* å¯çŸ¥på€¼ï¼ˆ=0.000000967693164ï¼‰å°äº0.01ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾


* è‹¥è®¤ä¸ºæŠ½æ ·åˆ†å¸ƒä¸ºtåˆ†å¸ƒï¼Œåˆ™å‡è®¾æ£€éªŒé¡»è€ƒè™‘ä¸¤ç§æƒ…å½¢
* ç¬¬ä¸€ç§æƒ…å½¢ï¼šè®¤ä¸ºç”·æ€§å’Œå¥³æ€§2015å¹´ä¸»èŒæ€»æ”¶å…¥å…·æœ‰ç›¸åŒçš„æ–¹å·®
	* ç”±äºæ¯ä¸€ç§æƒ…å½¢ä¹Ÿå…·æœ‰ä¸‰ç§åˆ¤æ–­æ–¹å¼ï¼Œä»¥ä¸‹ä»…ä»¥på€¼ä¸ºä¾‹
	* ç¬¬ä¸€æ­¥ï¼šè®¡ç®—ç”·å¥³æ€»ä½“æ”¶å…¥ä¹‹å·®çš„æ–¹å·®çš„æ··åˆä¼°è®¡é‡ï¼ˆvariance of pooled estimatorï¼‰
```
compute pooled_var = ((male_n-1)*male_var + (female_n-1)*female_var)/(male_n+female_n-2).
compute pooled_sd = sqrt(pooled_var).
```
	* ç¬¬äºŒæ­¥ï¼šè®¡ç®—ç”·å¥³æ€»ä½“æ”¶å…¥ä¹‹å·®çš„æŠ½æ ·åˆ†å¸ƒçš„æ ‡å‡†å·®
```
compute sqrt_n = sqrt((1/male_n)+(1/female_n)).
compute pooled_se = pooled_sd*sqrt_n.
```
	* ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—Zå€¼
```
compute Z_pooled_diff = (diff_mean-0)/pooled_se.
```
	* ç¬¬å››æ­¥ï¼šé€šè¿‡på€¼åˆ¤æ–­ï¼ˆåœ¨99%ç½®ä¿¡åŒºé—´ä¸‹ï¼Œpå€¼è‹¥å°äºÎ±å³0.01ï¼Œåˆ™æ‹’ç»è™šæ— å‡è®¾ï¼‰
```
formats Z_pooled_diff (f20.16).
descriptives Z_pooled_diff
	/statistics mean.
```
	* æ³¨æ„ï¼šæ­¤æ—¶è‡ªç”±åº¦=ç”·æ€§æ ·æœ¬æ•°+å¥³æ€§æ ·æœ¬æ•°-2
```
compute p_diff_t_1 = (1 - cdf.t(4.695877661100175,1460))*2.
formats p_diff_t_1 (f20.16).
descriptives p_diff_t_1
	/statistics mean.
```
* å¯çŸ¥på€¼ï¼ˆ=0.000002904076144ï¼‰å°äº0.01ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾

* ç¬¬äºŒç§æƒ…å½¢ï¼šè®¤ä¸ºç”·æ€§å’Œå¥³æ€§2015å¹´ä¸»èŒæ€»æ”¶å…¥å…·æœ‰ç›¸åŒçš„æ–¹å·®
* ä»¥ä¸‹ä»…ä»¥på€¼ä¸ºä¾‹
	* ç¬¬ä¸€æ­¥ï¼šè®¡ç®—æŠ½æ ·åˆ†å¸ƒæ–¹å·®å’ŒZå€¼
```
compute diff_var = male_var/male_n + female_var/female_n.
compute diff_se = sqrt(diff_var).
compute Z_score_diff = (diff_mean-0)/diff_se.
```
	* ç¬¬äºŒæ­¥ï¼šè®¡ç®—è‡ªç”±åº¦ï¼Œå–å››èˆäº”å…¥å€¼
```
compute df_diff = (diff_var**2)/((((male_var/male_n)**2)/(male_n-1))+(((female_var/female_n)**2)/(female_n-1))).
```
	* ç¬¬ä¸‰æ­¥ï¼šé€šè¿‡på€¼åˆ¤æ–­ï¼ˆåœ¨99%ç½®ä¿¡åŒºé—´ä¸‹ï¼Œpå€¼è‹¥å°äºÎ±å³0.01ï¼Œåˆ™æ‹’ç»è™šæ— å‡è®¾ï¼‰
```
formats Z_score_diff df_diff (f20.16).
descriptives Z_score_diff
	/statistics mean.
compute p_diff_t_2 = (1 - cdf.t(4.898096895558914,1422))*2.
formats p_diff_t_2 (f20.16).
descriptives p_diff_t_2
	/statistics mean.
```
* å¯çŸ¥på€¼ï¼ˆ=0.000001078383088ï¼‰å°äº0.01ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾


* ç¬¬äºŒç§æ–¹æ³•ï¼šåˆ©ç”¨è¯­æ³•t-testè¿›è¡Œè®¡ç®—
```
t-test groups = gender(1 2)
	/variables = income
	/criteria = ci(0.99).
```
	
	
* ç¬¬ä¸‰ç§æ–¹æ³•ï¼šé‡‡ç”¨æ‹”é´æ³•ï¼ˆä»å·²æœ‰æ ·æœ¬ä¸æ–­é‡å¤æŠ½å–1400ä¸ªæ ·æœ¬,åŒ…å«ç”·æ€§å’Œå¥³æ€§ï¼‰ä¿®æ­£æŠ½æ ·åˆ†å¸ƒæ ‡å‡†è¯¯åï¼Œå†è¿›è¡Œå‡è®¾æ£€éªŒ
* æ³¨æ„ï¼šç‹¬ç«‹æ ·æœ¬æ€»ä½“å‡å€¼æ£€éªŒçš„æ‹”é´æ³•éœ€è¦å¢åŠ â€œinputâ€ï¼Œå³åˆ†ç»„å˜é‡
```
bootstrap 
	/variables target = income input = gender
	/criteria cilevel = 99 nsamples = 1400.
t-test groups = gender(1 2)
	/variables = income
	/criteria = ci(0.99).  
```
* å¯çŸ¥på€¼ï¼ˆ=0.000714ï¼‰å°äº0.01ï¼Œæ‹’ç»è™šæ— å‡è®¾ï¼Œæ¥å—ç ”ç©¶å‡è®¾.

#### éšå ‚ç»ƒä¹ ï¼šè¯•æ£€éªŒ2015å¹´ä¸­å›½ç”·æ€§å’Œå¥³æ€§çš„æ€»ä½“å¹³å‡æœ€é«˜æ•™è‚²ç¨‹åº¦æ˜¯å¦ç›¸ç­‰ï¼Œç½®ä¿¡åŒºé—´ä¸º95%.
  
  
#### 7.åŸºäºç»™å®šæ‘˜è¦ä¿¡æ¯çš„ç‹¬ç«‹æ ·æœ¬æ€»ä½“å‡å€¼æ£€éªŒ
* ç‚¹é€‰æ“ä½œä¸ºï¼šåˆ†æ -> æ¯”è¾ƒå¹³å‡å€¼ -> æ‘˜è¦ç‹¬ç«‹æ ·æœ¬Tæ£€éªŒ -> åˆ†åˆ«å¡«å…¥æ ·æœ¬1å’Œæ ·æœ¬2çš„ä¸ªæ¡ˆæ•°ã€å‡å€¼ã€æ ‡å‡†å·®åŠæ ‡ç­¾ -> ç¡®å®š
* è¯­æ³•ç»“æ„ä¸ºï¼šspssinc summary ttest + n1 = æ ·æœ¬1ä¸ªæ¡ˆæ•° + mean1 = æ ·æœ¬1å‡å€¼ + sd1 = æ ·æœ¬1æ ‡å‡†å·® + label1 = æ ·æœ¬1æ ‡ç­¾ + ï¼ˆæ ·æœ¬2ä¿¡æ¯ï¼‰+ ci = ç½®ä¿¡åŒºé—´*100.

#### æ¡ˆä¾‹ï¼ˆ7-1ï¼‰è‹¥æ ·æœ¬1ä¸ªæ•°ä¸º500ï¼Œå‡å€¼ä¸º6.1ï¼Œæ ‡å‡†å·®ä¸º4.27ï¼Œæ ·æœ¬2ä¸ªæ¡ˆæ•°ä¸º500ï¼Œå‡å€¼ä¸º5.5ï¼Œæ ‡å‡†å·®ä¸º5.56ã€‚åœ¨95%ç½®ä¿¡åŒºé—´ä¸‹ï¼Œåˆ¤æ–­ä¸¤è€…æ€»ä½“å‡å€¼æ˜¯å¦ç›¸ç­‰ã€‚è¯·å†™å‡ºè™šæ— å‡è®¾ã€ç ”ç©¶å‡è®¾å’Œæ£€éªŒè¿‡ç¨‹
* è™šæ— å‡è®¾H0ï¼šæ ·æœ¬1å’Œæ ·æœ¬2çš„æ€»ä½“å‡å€¼ç›¸ç­‰
* ç ”ç©¶å‡è®¾H1ï¼šæ ·æœ¬1å’Œæ ·æœ¬2çš„æ€»ä½“å‡å€¼ä¸ç›¸ç­‰
* ç¬¬ä¸€ç§æ–¹æ³•ï¼šæ ¹æ®ç»Ÿè®¡å…¬å¼ç›´æ¥è¿›è¡Œè®¡ç®—
	* æ­¤è¿‡ç¨‹ä¸ç¬¬6èŠ‚ç›¸åŒ
* ç¬¬äºŒç§æ–¹æ³•ï¼šåˆ©ç”¨è¯­æ³•spssinc summary ttestè¿›è¡Œè®¡ç®—
```
spssinc summary ttest n1 = 500 mean1 = 6.1 sd1 = 4.27 label1 = "sample 1" 
                      n2 = 500 mean2 = 5.5 sd2 = 5.56 label2 = "sample 2" 
					  ci = 95.
```
